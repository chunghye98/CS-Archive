# System Call이란?
> 운영체제의 이중모드와 System call의 동작 방식, 종류에 대해 알아보자

## 이중 모드(Dual Mode)
운영체제는 사용자가 실행하는 응용 프로그램이 **하드웨어 자원에 직접 접근하는 것을 방지**하여 자원을 보호한다. 
따라서, 응용 프로그램이 자원에 접근하기 위해서는 운영체제를 통해서만 접근 가능하다.
이러한 운영체제의 역할은 이중모드로써 구현된다. **이중 모드**란 CPU가 명령어를 실행하는 모드를
크게 **사용자 모드**와 **커널 모드**로 구분하는 방식이다.

### 사용자 모드 User Mode
운영체제 서비스를 제공받을 수 없는 실행 모드이다. 
응용 프로그램은 기본적으로 사용자 모드로 실행된다. 

### 커널 모드 Kernel Mode
운영체제 서비스를 제공받을 수 있는 실행 모드이다.
자원에 직접 접근이 가능하다.

## 시스템 호출(System Call)
사용자 모드로 실행되는 프로그램이 자원에 접근하기 위해서는 커널 모드로 전환되어야 한다.    
운영체제에 이 전환 요청을 하는 것을 **시스템 호출**이라고 한다.

시스템 호출은 일종의 인터럽트로, 소프트웨어 인터럽트로 구분된다. 

### 시스템 호출 처리 순서
인터럽트 처리 순서와 유사하다.
1. 시스템 호출을 발생시키는 명령어가 실행되면 커널 모드로 전환한다.
2. CPU는 지금까지의 작업을 메모리의 스택 영역에 백업한다.
3. 커널 영역 내에 시스템 호출을 수행하는 코드(인터럽트 서비스 루틴)를 실행한다.
4. 사용자 모드로 전환하고 다시 기존에 실행하던 응용 프로그램으로 복귀하여 실행을 계속한다.

일반적으로 응용 프로그램은 실행 과정에서 빈번하게 시스템 호출을 발생시키고 사용자 모드와 커널 모드를 오가며 실행한다.
<img src="https://github.com/chunghye98/CS-Archive/assets/57451700/6035e9a6-95f3-48a8-88a3-a65da917f89a" width="50%">

### 시스템 호출의 종류
유닉스, 리눅스 등의 운영체제에서 사용하는 대표적인 시스템 호출의 종류에 대해 알아보자.    
**1. 프로세스 관리**

|시스템 호출|설명|
|---------|---|
|fork()|새 자식 프로세스 생성|
|execve()|프로세스 실행(메모리 공간을 새로운 프로그램의 내용을 덮어씌움)|
|exit()|프로세스 종료|
|waitpid()|자식 프로세스가 종료할 때까지 대기|

**2. 파일 관리**

|시스템 호출|설명|
|---------|---|
|open()|파일 열기|
|close()|파일 닫기|
|read()|파일 읽기|
|write()|파일 쓰기|
|stat()|파일 정보 획득|

**3. 디렉터리 관리**

|시스템 호출|설명|
|---------|---|
|chdir()|작업 디렉터리 변경|
|mkdir()|디렉터리 생성|
|rmdir()|비어있는 디렉터리 삭제|

**4. 파일 시스템 관리**

| 시스템 호출   | 설명            |
|----------|---------------|
| mount()  | 파일 시스템 마운트    |
| umount() | 파일 시스템 마운트 해제 |

## 참고
혼자 공부하는 컴퓨터구조 + 운영체제  